<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    
    <script type="text/javascript" src="cordova.js"></script>

    <style type="text/css">
    #map_canvas {
      position: absolute;
      left:-50px;
      top: -50px;
      right: -50px;
      bottom: -50px;
    }
    </style>
    <script >
    document.addEventListener("deviceready", function() 
	{
		// Get the current device location "without map"
		var option = {
			maximumAge: 3000,
			timeout: 5000,
		  enableHighAccuracy: true // use GPS as much as possible
		};
		plugin.google.maps.LocationService.getMyLocation(option, function(location) 
		{
			// Create a map with the device location
			var mapDiv = document.getElementById('map_canvas');
			var map = plugin.google.maps.Map.getMap(mapDiv, 
			{
				'camera': 
				{
					target: location.latLng,
					zoom: 16
				}
			  });

			map.addEventListener(plugin.google.maps.event.MAP_READY, function() 
			{
				// Add a marker
				var text = ["Current your location:\n",
				"latitude:" + location.latLng.lat.toFixed(3),
				"longitude:" + location.latLng.lng.toFixed(3),
				"speed:" + location.speed,
				"time:" + location.time,
				"bearing:" + location.bearing].join("\n");

				var marker = map.addMarker(
				{
					title: text,
					position: location.latLng
				}, function(marker) 
				{
				  marker.showInfoWindow();
				});
			});
		});
		function onSuccess(position) {
			// Add a marker
				var text = ["Current your location:\n",
				"latitude:" + location.latLng.lat.toFixed(3),
				"longitude:" + location.latLng.lng.toFixed(3),
				"speed:" + location.speed,
				"time:" + location.time,
				"bearing:" + location.bearing].join("\n");

				var marker = map.addMarker(
				{
					title: text,
					position: location.latLng
				}, function(marker) 
				{
				  marker.showInfoWindow();
				});
		}

		// onError Callback receives a PositionError object
		//
		function onError(error) {
			alert('code: '    + error.code    + '\n' +
				  'message: ' + error.message + '\n');
		}

		// Options: throw an error if no update is received every 30 seconds.
		//
		var watchID = navigator.geolocation.watchPosition(onSuccess, onError, option);
	});
	
	
    </script>
</head>

<body>
	<h1>test</h1>

    <div id="map_canvas">
    </div>
	
	<script type="text/javascript" src="jquery.js"></script>

</body>

</html>